"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}!function(a){var b=0,c=0,d=function d(e,f,g,h){if(_classCallCheck(this,d),!f)throw new Error("DynamicInjection: name argument should be a string");if(this.name=f,e===!0)e=function(){return!0};else if(!e||!a.isFunction(e))throw new Error("DynamicInjection: injectionFunction argument should be a function");this.injectionFunction=e,this.attributes=g||[],this.priority=isNaN(parseInt(h,10))?c:parseInt(h,10),this._id=++b};a.module("op.dynamicDirective",[]).provider("dynamicDirectiveService",function(){function a(a,b){var c=b.priority-a.priority;return 0!==c?c:b.name<a.name?-1:b.name>a.name?1:0}function b(a){g[a]=g[a]||[]}function c(a,c){b(a);var d=g[a];return d.filter(function(a){return a.injectionFunction(c)})}function e(a,c){b(a),g[a].push(c)}function f(b){return b.sort(a),b}var g={};return{addInjection:e,DynamicDirective:d,$get:["$rootScope",function(a){return{DynamicDirective:d,getInjections:c,sort:f,addInjection:function(b,c){e(b,c),a.$broadcast("dynamicDirectiveInjectionUpdated",b,c)}}}]}}()).directive("dynamicDirective",["$compile","dynamicDirectiveService",function(b,c){function d(b,d){var e=c.sort(d).map(function(a){return a._id}),g=b.children("["+f+"]").map(function(b,c){return parseInt(a.element(c).attr(f),10)}).toArray();if(e.join(",")!==g.join(","))for(var h=0,i=e.length-2;i>=h;h++){var j=e[h],k=e[h+1],l=b.children("["+f+"="+j+"]");l.next().attr(f)!==k&&b.children("["+f+"="+k+"]").insertAfter(l)}}function e(e,g,h){function i(c){var d=a.element(j(c)),f=b(d)(e);g.append(f)}function j(b){var c={};c[f]=b._id,b.attributes.forEach(function(a){return c[a.name]=a.value});var d=a.element("<"+b.name+"/>");return d.attr(c),d}function k(){g.children().length?g.show():g.hide()}var l=h.dynamicDirective;g.hide();var m=c.sort(c.getInjections(l,e));m.forEach(i),k(),e.$on("dynamicDirectiveInjectionUpdated",function(b,h){if(h===l){var j=c.sort(c.getInjections(l,e)),m={},n={};j.forEach(function(a){return m[a._id]=a}),g.children().each(function(b,c){var d=a.element(c),e=d.attr(f);if(e)return m[e]?void(n[e]=!0):void d.remove()});var o=Object.keys(m).length,p=Object.keys(n).length;o!==p&&Object.keys(m).forEach(function(a){n[a]||i(m[a])}),d(g,j),k()}})}var f="dynamic-directive-id";return{restrict:"A",link:e}}])}(angular);
//# sourceMappingURL=dynamic-directive.min.js.map